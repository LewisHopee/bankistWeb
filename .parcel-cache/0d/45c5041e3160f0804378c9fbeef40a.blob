{"mappings":"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","sources":["./script.js"],"sourcesContent":["'use strict';\n\nconst account1 = {\n  owner: 'Jonas Schmedtmann',\n  movements: [200, 455.23, -306.5, 25000, -642.21, -133.9, 79.97, 1300],\n  interestRate: 1.2, // %\n  pin: 1111,\n\n  movementsDates: [\n    '2019-11-18T21:31:17.178Z',\n    '2019-12-23T07:42:02.383Z',\n    '2020-01-28T09:15:04.904Z',\n    '2020-04-01T10:17:24.185Z',\n    '2020-05-08T14:11:59.604Z',\n    '2020-07-26T17:01:17.194Z',\n    '2020-07-28T23:36:17.929Z',\n    '2020-08-01T10:51:36.790Z',\n  ],\n  currency: 'EUR',\n  locale: 'pt-PT', // de-DE\n};\n\nconst account2 = {\n  owner: 'Jessica Davis',\n  movements: [5000, 3400, -150, -790, -3210, -1000, 8500, -30],\n  interestRate: 1.5,\n  pin: 2222,\n\n  movementsDates: [\n    '2019-11-01T13:15:33.035Z',\n    '2019-11-30T09:48:16.867Z',\n    '2019-12-25T06:04:23.907Z',\n    '2020-01-25T14:18:46.235Z',\n    '2020-02-05T16:33:06.386Z',\n    '2020-04-10T14:43:26.374Z',\n    '2020-06-25T18:49:59.371Z',\n    '2020-07-26T12:01:20.894Z',\n  ],\n  currency: 'USD',\n  locale: 'en-US',\n};\n\nconst accounts = [account1, account2];\n\n/////////////////////////////////////////////////\n// Elements\nconst labelWelcome = document.querySelector('.welcome');\nconst labelDate = document.querySelector('.date');\nconst labelBalance = document.querySelector('.balance__value');\nconst labelSumIn = document.querySelector('.summary__value--in');\nconst labelSumOut = document.querySelector('.summary__value--out');\nconst labelSumInterest = document.querySelector('.summary__value--interest');\nconst labelTimer = document.querySelector('.timer');\n\nconst containerApp = document.querySelector('.app');\nconst containerMovements = document.querySelector('.movements');\n\nconst btnLogin = document.querySelector('.login__btn');\nconst btnTransfer = document.querySelector('.form__btn--transfer');\nconst btnLoan = document.querySelector('.form__btn--loan');\nconst btnClose = document.querySelector('.form__btn--close');\nconst btnSort = document.querySelector('.btn--sort');\n\nconst inputLoginUsername = document.querySelector('.login__input--user');\nconst inputLoginPin = document.querySelector('.login__input--pin');\nconst inputTransferTo = document.querySelector('.form__input--to');\nconst inputTransferAmount = document.querySelector('.form__input--amount');\nconst inputLoanAmount = document.querySelector('.form__input--loan-amount');\nconst inputCloseUsername = document.querySelector('.form__input--user');\nconst inputClosePin = document.querySelector('.form__input--pin');\n\n/////////////////////////////////////////////////\n// Functions\n\nconst formatMovementDate = function (date, locale) {\n  const calcDaysPassed = (date1, date2) =>\n    Math.round(Math.abs(date2 - date1) / (1000 * 60 * 60 * 24));\n\n  const daysPassed = calcDaysPassed(new Date(), date);\n  console.log(daysPassed);\n\n  if (daysPassed === 0) return 'Today';\n  if (daysPassed === 1) return 'Yesterday';\n  if (daysPassed <= 7) return `${daysPassed} days ago`;\n\n  // const day = `${date.getDate()}`.padStart(2, 0);\n  // const month = `${date.getMonth() + 1}`.padStart(2, 0);\n  // const year = date.getFullYear();\n  // return `${day}/${month}/${year}`;\n  return new Intl.DateTimeFormat(locale).format(date);\n};\n\nconst formatCur = function (value, locale, currency) {\n  return new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency: currency,\n  }).format(value);\n};\n\nconst displayMovements = function (acc, sort = false) {\n  containerMovements.innerHTML = '';\n\n  const movs = sort\n    ? acc.movements.slice().sort((a, b) => a - b)\n    : acc.movements;\n\n  movs.forEach(function (mov, i) {\n    const type = mov > 0 ? 'deposit' : 'withdrawal';\n\n    const date = new Date(acc.movementsDates[i]);\n    const displayDate = formatMovementDate(date, acc.locale);\n\n    const formattedMov = formatCur(mov, acc.locale, acc.currency);\n\n    const html = `\n      <div class=\"movements__row\">\n        <div class=\"movements__type movements__type--${type}\">${\n      i + 1\n    } ${type}</div>\n        <div class=\"movements__date\">${displayDate}</div>\n        <div class=\"movements__value\">${formattedMov}</div>\n      </div>\n    `;\n\n    containerMovements.insertAdjacentHTML('afterbegin', html);\n  });\n};\n\nconst calcDisplayBalance = function (acc) {\n  acc.balance = acc.movements.reduce((acc, mov) => acc + mov, 0);\n  labelBalance.textContent = formatCur(acc.balance, acc.locale, acc.currency);\n};\n\nconst calcDisplaySummary = function (acc) {\n  const incomes = acc.movements\n    .filter(mov => mov > 0)\n    .reduce((acc, mov) => acc + mov, 0);\n  labelSumIn.textContent = formatCur(incomes, acc.locale, acc.currency);\n\n  const out = acc.movements\n    .filter(mov => mov < 0)\n    .reduce((acc, mov) => acc + mov, 0);\n  labelSumOut.textContent = formatCur(Math.abs(out), acc.locale, acc.currency);\n\n  const interest = acc.movements\n    .filter(mov => mov > 0)\n    .map(deposit => (deposit * acc.interestRate) / 100)\n    .filter((int, i, arr) => {\n      // console.log(arr);\n      return int >= 1;\n    })\n    .reduce((acc, int) => acc + int, 0);\n  labelSumInterest.textContent = formatCur(interest, acc.locale, acc.currency);\n};\n\nconst createUsernames = function (accs) {\n  accs.forEach(function (acc) {\n    acc.username = acc.owner\n      .toLowerCase()\n      .split(' ')\n      .map(name => name[0])\n      .join('');\n  });\n};\ncreateUsernames(accounts);\n\nconst updateUI = function (acc) {\n  // Display movements\n  displayMovements(acc);\n\n  // Display balance\n  calcDisplayBalance(acc);\n\n  // Display summary\n  calcDisplaySummary(acc);\n};\n\nconst startLogOutTimer = function () {\n  const tick = function () {\n    const min = String(Math.trunc(time / 60)).padStart(2, 0);\n    const sec = String(time % 60).padStart(2, 0);\n\n    // In each call, print the remaining time to UI\n    labelTimer.textContent = `${min}:${sec}`;\n\n    // When 0 seconds, stop timer and log out user\n    if (time === 0) {\n      clearInterval(timer);\n      labelWelcome.textContent = 'Log in to get started';\n      containerApp.style.opacity = 0;\n    }\n\n    // Decrease 1s\n    time--;\n  };\n\n  // Set time to 5 minutes\n  let time = 120;\n\n  // Call the timer every second\n  tick();\n  const timer = setInterval(tick, 1000);\n\n  return timer;\n};\n\n///////////////////////////////////////\n// Event handlers\nlet currentAccount, timer;\n\n// FAKE ALWAYS LOGGED IN\n// currentAccount = account1;\n// updateUI(currentAccount);\n// containerApp.style.opacity = 100;\n\nbtnLogin.addEventListener('click', function (e) {\n  // Prevent form from submitting\n  e.preventDefault();\n\n  currentAccount = accounts.find(\n    acc => acc.username === inputLoginUsername.value\n  );\n  console.log(currentAccount);\n\n  if (currentAccount?.pin === +inputLoginPin.value) {\n    // Display UI and message\n    labelWelcome.textContent = `Welcome back, ${\n      currentAccount.owner.split(' ')[0]\n    }`;\n    containerApp.style.opacity = 100;\n\n    // Create current date and time\n    const now = new Date();\n    const options = {\n      hour: 'numeric',\n      minute: 'numeric',\n      day: 'numeric',\n      month: 'numeric',\n      year: 'numeric',\n      // weekday: 'long',\n    };\n    // const locale = navigator.language;\n    // console.log(locale);\n\n    labelDate.textContent = new Intl.DateTimeFormat(\n      currentAccount.locale,\n      options\n    ).format(now);\n\n    // const day = `${now.getDate()}`.padStart(2, 0);\n    // const month = `${now.getMonth() + 1}`.padStart(2, 0);\n    // const year = now.getFullYear();\n    // const hour = `${now.getHours()}`.padStart(2, 0);\n    // const min = `${now.getMinutes()}`.padStart(2, 0);\n    // labelDate.textContent = `${day}/${month}/${year}, ${hour}:${min}`;\n\n    // Clear input fields\n    inputLoginUsername.value = inputLoginPin.value = '';\n    inputLoginPin.blur();\n\n    // Timer\n    if (timer) clearInterval(timer);\n    timer = startLogOutTimer();\n\n    // Update UI\n    updateUI(currentAccount);\n  }\n});\n\nbtnTransfer.addEventListener('click', function (e) {\n  e.preventDefault();\n  const amount = +inputTransferAmount.value;\n  const receiverAcc = accounts.find(\n    acc => acc.username === inputTransferTo.value\n  );\n  inputTransferAmount.value = inputTransferTo.value = '';\n\n  if (\n    amount > 0 &&\n    receiverAcc &&\n    currentAccount.balance >= amount &&\n    receiverAcc?.username !== currentAccount.username\n  ) {\n    // Doing the transfer\n    currentAccount.movements.push(-amount);\n    receiverAcc.movements.push(amount);\n\n    // Add transfer date\n    currentAccount.movementsDates.push(new Date().toISOString());\n    receiverAcc.movementsDates.push(new Date().toISOString());\n\n    // Update UI\n    updateUI(currentAccount);\n\n    // Reset timer\n    clearInterval(timer);\n    timer = startLogOutTimer();\n  }\n});\n\nbtnLoan.addEventListener('click', function (e) {\n  e.preventDefault();\n\n  const amount = Math.floor(inputLoanAmount.value);\n\n  if (amount > 0 && currentAccount.movements.some(mov => mov >= amount * 0.1)) {\n    setTimeout(function () {\n      // Add movement\n      currentAccount.movements.push(amount);\n\n      // Add loan date\n      currentAccount.movementsDates.push(new Date().toISOString());\n\n      // Update UI\n      updateUI(currentAccount);\n\n      // Reset timer\n      clearInterval(timer);\n      timer = startLogOutTimer();\n    }, 2500);\n  }\n  inputLoanAmount.value = '';\n});\n\nbtnClose.addEventListener('click', function (e) {\n  e.preventDefault();\n\n  if (\n    inputCloseUsername.value === currentAccount.username &&\n    +inputClosePin.value === currentAccount.pin\n  ) {\n    const index = accounts.findIndex(\n      acc => acc.username === currentAccount.username\n    );\n    console.log(index);\n    // .indexOf(23)\n\n    // Delete account\n    accounts.splice(index, 1);\n\n    // Hide UI\n    containerApp.style.opacity = 0;\n  }\n\n  inputCloseUsername.value = inputClosePin.value = '';\n});\n\nlet sorted = false;\nbtnSort.addEventListener('click', function (e) {\n  e.preventDefault();\n  displayMovements(currentAccount.movements, !sorted);\n  sorted = !sorted;\n});\n"],"names":["accounts","owner","movements","interestRate","pin","movementsDates","currency","locale","labelWelcome","document","querySelector","labelDate","labelBalance","labelSumIn","labelSumOut","labelSumInterest","labelTimer","containerApp","containerMovements","btnLogin","btnTransfer","btnLoan","btnClose","btnSort","inputLoginUsername","inputLoginPin","inputTransferTo","inputTransferAmount","inputLoanAmount","inputCloseUsername","inputClosePin","formatMovementDate","date","date1","date2","daysPassed","Date","Math","round","abs","console","log","concat","Intl","DateTimeFormat","format","formatCur","value","NumberFormat","style","displayMovements","acc","sort","arguments","length","undefined","innerHTML","movs","slice","a","b","forEach","mov","i","type","displayDate","formattedMov","html","insertAdjacentHTML","username","toLowerCase","split","map","name","join","currentAccount","timer","updateUI","balance","reduce","textContent","calcDisplayBalance","incomes","filter","out","interest","deposit","int","arr","calcDisplaySummary","startLogOutTimer","tick","min","String","trunc","time","padStart","sec","clearInterval","opacity","setInterval","addEventListener","e","_currentAccount","preventDefault","find","now","hour","minute","day","month","year","blur","amount","receiverAcc","push","toISOString","floor","some","setTimeout","index","findIndex","splice","sorted"],"version":3,"file":"script.HASH_REF_24f629a84f9b4e1cdb5d416c00201746.js.map"}